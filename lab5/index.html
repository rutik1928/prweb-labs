<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Хранение данных</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      font-family: sans-serif;
    }

    .left-panel,
    .right-panel {
      width: 50%;
      height: 100%;
      padding: 40px;
    }

    .left-panel {
      background-color: rgb(211, 211, 211);
      border-right: 2px solid #ccc;
      display: flex;
      flex-direction: column;
      gap: 30px;
      border-radius: 0 20px 20px 0;
    }
    .main-inputs{
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .main-inputs label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    .main-inputs input {
      width: 100%;
      padding: 5px;
      border: 1px solid #aaa;
      border-radius: 8px;
    }

    .right-panel {
      background-color: #f9f9f9;
      border-radius: 20px 0 0 20px;
      align-items: center;
      color: #666;
      font-size: 18px;
    }
    .button-wrapper {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .big-button{
      padding: 20px;
      height: 50px;
      width: 100%;
      border: 1px solid #aaa;
      border-radius: 8px;
      background-color: rgb(127, 231, 137);
    }
    .last-button{
      padding: 10px;
      height: 40px;
      width: 100%;
      border: 1px solid #aaa;
      border-radius: 8px;
    }
    .small-buttons {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      width: 100%;
      gap: 10px;
    }

    .small-buttons button {
      flex: 1;
      padding: 10px;
      border: 1px solid #aaa;
      border-radius: 8px;
    }

    .small-buttons button:not(:last-child) {
      margin-right: 10px;
    }
    .section {
      display: flex;
      flex-direction: column;
      flex: 1;
      gap: 8px;
    }

    .section input {
      padding: 8px;
      border: 1px solid #aaa;
      border-radius: 8px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }

    table, th, td {
      border: 1px solid #aaa;
      font-size: 14px;
    }

    th, td {
      padding: 4px;
      text-align: center;
    }

  </style>
</head>
<body>
  <div class="left-panel">
    <div class="main-inputs">
      <div>
        <label for="group">Номер класса №:</label>
        <input type="text" id="group" name="group">
      </div>
      <div>
        <label for="amount">Количество учащихся:</label>
        <input type="number" id="amount" name="amount">
      </div>
      <div>
        <label for="teacher">ФИО Классного руководителя:</label>
        <input type="text" id="teacher" name="teacher">
      </div>
    </div>
    <div class="button-wrapper">
      <button class="big-button" id="submit-btn">Добавить запись</button>
      <button class="last-button">Вывести ФИО Классных руководителей</button>
      <div class="small-buttons">
        <button id="reset-btn">Очистить форму</button>
      
        <div class="section">
          <button id="delete-btn">Удалить запись</button>
          <input type="number" id="delete-id" placeholder="ID для удаления">
        </div>
      
        <div class="section">
          <button id="add-button">Добавить поле</button>
          <input type="text" id="add-input" placeholder="Названия поля">
        </div>
      </div>
      
    </div>
  </div>

  <div class="right-panel">
    <table id="results-table">
      <thead>
        <tr>
          <th>ID</td>
          <th>№ класса</td>
          <th>Кол-во уч.</td>
          <th>ФИО Кл.Рук.</td>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const extraFields = [];
  
    document.getElementById("submit-btn").addEventListener("click", function(){
      const tableBody = document.querySelector("#results-table tbody");
      const inputs = document.querySelectorAll(".main-inputs input");
      const rowId = tableBody.rows.length + 1;
  
      let isValid = true;
      inputs.forEach(input => {
        if (input.value.trim() === "") isValid = false;
      });
  
      if (!isValid){
        alert("Пожалуйста заполните все поля");
        return;
      }
  
      const newRow = document.createElement("tr");
      const idCell = document.createElement("td");
      idCell.textContent = rowId;
      newRow.appendChild(idCell);
  
      inputs.forEach(input => {
        const td = document.createElement("td");
        td.textContent = input.value;
        newRow.appendChild(td);
        input.value = ""; // очищаем сразу
      });
  
      tableBody.appendChild(newRow);
    });
  
    document.getElementById("reset-btn").addEventListener("click", function(){
      const inputs = document.querySelectorAll(".main-inputs input");
      inputs.forEach(input => input.value = "");
    });
  
    document.getElementById("delete-btn").addEventListener("click", function () {
      const deleteId = parseInt(document.getElementById("delete-id").value);
      const rows = document.querySelectorAll("#results-table tbody tr");
      let deleted = false;
  
      rows.forEach(row => {
        const currentId = parseInt(row.children[0].textContent);
        if (currentId === deleteId) {
          row.remove();
          deleted = true;
        }
      });
  
      if (!deleted) {
        alert("Запись с таким ID не найдена.");
      } else {
        const updatedRows = document.querySelectorAll("#results-table tbody tr");
        updatedRows.forEach((row, index) => {
          row.children[0].textContent = index + 1;
        });
      }
  
      document.getElementById("delete-id").value = "";
    });
  
    const addFieldButton = document.querySelectorAll(".section button")[1];
    const addFieldInput = document.querySelectorAll(".section input")[1];
    const tableHeadRow = document.querySelector("#results-table thead tr");
    const mainInputsContainer = document.querySelector(".main-inputs");
  
    addFieldButton.addEventListener("click", () => {
      const fieldName = addFieldInput.value.trim();
      if (fieldName === "") {
        alert("Введите название поля");
        return;
      }
  
      if (extraFields.includes(fieldName)) {
        alert("Поле с таким названием уже существует.");
        return;
      }
  
      extraFields.push(fieldName);
  
      const newTh = document.createElement("th");
      newTh.textContent = fieldName;
      tableHeadRow.appendChild(newTh);
  
      const fieldContainer = document.createElement("div");
      const fieldLabel = document.createElement("label");
      fieldLabel.textContent = `${fieldName}:`;
      const fieldInput = document.createElement("input");
      fieldInput.type = "text";
  
      fieldContainer.appendChild(fieldLabel);
      fieldContainer.appendChild(fieldInput);
      mainInputsContainer.appendChild(fieldContainer);
      
      addFieldInput.value = "";
    });
  </script>
  
  
</body>
</html>
